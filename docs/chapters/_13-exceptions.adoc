== Exceptions
EJB differentiates between application exceptions and system exceptions. Application exceptions are handled technically and do not result in rollback by default, while system exceptions put the container in an error state and trigger a rollback. Spring does not recognize this distinction in the same way. Instead, `@Transactional` rules control whether checked or runtime exceptions are rolled back.
=== Application Exceptions in EJB
`@ApplicationException` allows exceptions to be explicitly marked as technical and to control rollback behavior. This is an important basis for technical error handling in many EJB applications.
Runtime exceptions that are not marked as application exceptions are treated as system exceptions in EJB. They result in rollback and may invalidate the affected bean instance. In Spring, this behavior must be reflected in the error and retry design.
.Example: BEFORE (EJB)
[source, java]
----
import javax.ejb.ApplicationException;

@ApplicationException(rollback = false)
public class PricingRuleViolation extends Exception {
    public PricingRuleViolation(String message) {
        super(message);
    }
}
----

=== Spring equivalent
In Spring, rollback behavior is defined in `@Transactional`. By default, checked exceptions do not result in rollback. If business exceptions should also trigger a rollback, this must be specified explicitly.
.Example: AFTER (Spring Boot)
[source, java]
----
import org.springframework.transaction.annotation.Transactional;

@Transactional(rollbackFor = PricingRuleViolation.class)
public Money calculateTariff(Shipment shipment) throws PricingRuleViolation {
    return pricingEngine.calculate(shipment);
}
----

Migrations must identify technical exceptions and consciously decide which rollback behavior is required. EJB `@ApplicationException` annotations should typically be mapped into Spring transaction rules.