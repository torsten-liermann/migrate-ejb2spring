== Transaction rollback
Rollback rules differ between EJB and Spring. In EJB, the separation between application and system exceptions is central. In Spring, `@Transactional` controls rollback, by default only for Runtime Exceptions. This difference is a common source of functional variation.
=== EJB rollback rules
* System exceptions lead to rollback.
* Application exceptions only cause rollback if `rollback = true` is set.
* `setRollbackOnly()` can mark rollback explicitly.
=== Spring rollback rules
* Runtime exceptions lead to rollback.
* Checked exceptions do not trigger rollback unless `rollbackFor` is set.
* `TransactionAspectSupport.currentTransactionStatus().setRollbackOnly()` explicitly marks the rollback.
In EJB, rollback is often triggered via `SessionContext.setRollbackOnly()`. In Spring, the equivalent is setting the rollback flag in the current `TransactionStatus`. During the migration, it is important to check whether `setRollbackOnly()` is used as a technical control flow in EJB and how this needs to be replicated in Spring.
=== Migration aspects
For beans with `@ApplicationException`, it must be clarified which rollback rules are technically required. These rules must be mapped into `@Transactional` to maintain error handling and transaction consistency.