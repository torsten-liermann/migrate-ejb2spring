== JAX-WS
JAX-WS is based on SOAP and WSDL and is often closely linked to the application server in EJB applications. There is no built-in JAX-WS implementation in Spring Boot; Apache CXF or Spring Web Services is often used. The migration should take the service contract as a starting point and reset the technical implementation.
JAX-WS examples are included in the WildFly quickstart (e.g. `jaxws-ejb`, `jaxws-retail`, `helloworld-ws`). These projects serve as reference cases for provider maintenance and Spring integration evaluation.
=== Service implementation
EJB tags SOAP services with `@WebService` and binds them to the container. In Spring Boot, the same contract is typically published via CXF or via Spring-WS with an explicit configuration.
=== Migration aspects
The WSDL forms the binding contract and must be versioned and checked as part of the migration. SOAP endpoints in Spring are typically implemented via CXF or Spring-WS. Security (WS-Security) and transactions must be configured explicitly, as container-side defaults from EJB are omitted.
The mapping from EJB-`@WebService` to Spring is done via an independent SOAP configuration (e.g. CXF or Spring-WS) because the infrastructure is structured differently.
=== Target of migration
For this project the priority is clear:
1. **Provider maintenance (CXF first):** JAX-WS services should continue to be operated primarily via the existing provider. The following applies to CXF: Provider runtime and boot integration have priority over a conversion to Spring-WS.
2. **Spring-WS (lower priority):** A migration to Spring-WS is possible, but only downstream. It requires a conscious remodeling of the SOAP infrastructure.
=== Spring support evaluation
Spring Boot does not provide its own JAX-WS stack. Provider integrations come from the respective projects and must be checked for each target architecture:
- **CXF:** Integration is done via Apache CXF (`cxf-spring-boot-starter-jaxws`). The official CXF starter offers Jakarta EE 10 and Spring 6 support (from CXF 4.x).
- **Spring-WS:** Alternative SOAP implementation with own modeling (endpoint beans, WS configuration). For the project, this is an optional, low-priority target architecture.
The decision whether to choose provider preservation or Spring-WS is an architectural decision. It depends on existing WSDLs, security policies, runtime requirements and existing CXF configurations.
=== Automatic CXF configuration (GenerateCxfJaxwsConfig)
The `GenerateCxfJaxwsConfig` recipe automates CXF integration for JAX-WS endpoints:
==== Scan phase
1. Detects `@WebService` and `@WebServiceProvider` annotations (javax.* and jakarta.*)
2. Checks for existing CXF dependencies in the effective Maven model (including parent POMs)
3. Detects Spring-WS conflicts (`spring-ws-core`, `spring-boot-starter-web-services`)
4. Determine the Spring Boot Application Package for the configuration class
==== Generated artifacts
The following artifacts are created for each module with JAX-WS endpoints:
1. **JaxwsConfiguration.java** - `@Configuration` class with `@Bean Endpoint` for each service (in case of naming conflicts: automatic suffix)
2. **Maven Dependency** - `org.apache.cxf:cxf-spring-boot-starter-jaxws:4.1.4`
3. **cxf.path Property** - Servlet mapping in `application.properties` (only with non-default basePath and if not already configured)
==== Endpoint path derivation
The publish path for each endpoint is derived as follows:
1. **Default:** Class name as path segment (e.g. `MyService` -> `/MyService`)
2. **Optional:** `@WebService(name=...)` if available AND URL-safe (alphanumeric only, `-`, `_`)
3. **If name attribute is invalid:** Default (class name) + `@NeedsReview`
4. **For path collisions:** Unique suffix + `@NeedsReview`
IMPORTANT: The `serviceName` attribute is WSDL specific and is NOT used as a URL path.
==== Edge cases and conflict handling
[cols="1,2"]|===
| Situation | Behave
| Existing CXF config (JAXRSServerFactoryBean, Endpoint beans)
| No configuration generated, only dependencies added
| Spring-WS dependencies exist
| POM comment marker (`@NeedsReview: JAX-WS Migration Conflict`); no CXF config generated
| Multiple providers detected
| Effective Maven model decides; for ambiguity `@NeedsReview`
| cxf.path already configured
| No Append; Comment shows source (properties/yaml/profile)
| Modules without @WebService
| No change|===

=== Configuration via project.yaml
[source,yaml]----
jaxws:
  provider: cxf        # cxf | manual (Default: cxf)
  basePath: /services  # Servlet-Mapping (Default: /services)
----

==== Provider options
[cols="1.3"]|===
| Provider | Description

| `cxf` (Default)
| Automatic CXF configuration: `@Bean Endpoint`, CXF Dependency, `cxf.path` Property

| `manual`
| No automatic processing; JAX-WS endpoints remain unchanged for manual migration
|===

==== basePath configuration
The `jaxws.basePath` defines the CXF servlet mapping. Default: `/services`
Example: With `basePath: /ws`, endpoints can be reached under `/ws/MyService`.
The property `cxf.path` is set in `application.properties`, but only if:
* basePath differs from default (`/services`).
* No existing `cxf.path` configuration was found (in properties, yaml or profile)
[source, properties]----
# Only for non-default basePath:
cxf.path=/ws----

NOTE: With default basePath `/services` no `cxf.path` property is written because CXF already uses this default.
=== Generated configuration class
[source, java]----
package com.example;

import jakarta.xml.ws.Endpoint;
import org.apache.cxf.Bus;
import org.apache.cxf.jaxws.EndpointImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class JaxwsConfiguration {

    @Bean
    public Endpoint myServiceEndpoint(Bus bus, MyServiceImpl myServiceImpl) {
        EndpointImpl endpoint = new EndpointImpl(bus, myServiceImpl);
        endpoint.publish("/MyService");
        return endpoint;
    }
}
----

NOTE: In case of name conflicts, an automatic suffix is ​​added (e.g. `JaxwsConfiguration2`).
=== Manual migration (provider: manual)
If `jaxws.provider:manual` is configured:
1. No automatic processing of `@WebService` classes
2. No CXF dependencies are added
3. No configuration class is generated
This enables a conscious decision for Spring-WS or other alternatives. The migration must be done completely manually.
=== Provider documentation****
* https://cxf.apache.org/[Apache CXF Documentation]
* https://cxf.apache.org/docs/springboot.html[CXF Spring Boot Integration]
* https://spring.io/projects/spring-ws[Spring Web Services]
* https://jakarta.ee/specifications/xml-web-services/4.0/jakarta-xml-ws-spec-4.0.html[Jakarta XML Web Services 4.0 Spec]
****
